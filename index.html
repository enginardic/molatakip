<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <title>Mola Takip</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="alert-message" id="alertMessage"></div>
    <button class="settings-icon" onclick="showSettings()">âš™ï¸</button>

    <div class="container">
        <div class="header">
            <h1>â° Mola Takip</h1>
            <div class="current-time" id="currentTime"></div>
        </div>
        
        <div class="card countdown">
            <div class="countdown-label" id="countdownLabel">Bir sonraki</div>
            <div class="countdown-time" id="countdownTime">--:--</div>
            <div class="next-break" id="nextBreak"></div>
            <div class="status" id="currentStatus"></div>
            <div class="timer-controls" id="timerControls"></div>
            
            <div class="notes-section" id="notesSection" style="display: none;">
                <h3>ğŸ“ ToplantÄ± NotlarÄ±</h3>
                <textarea 
                    class="notes-textarea" 
                    id="meetingNotes" 
                    placeholder="ToplantÄ± notlarÄ±nÄ±zÄ± buraya yazÄ±n..."
                    oninput="autoSaveNotes()"></textarea>
                <div class="notes-info">ğŸ’¾ Notlar otomatik kaydediliyor</div>
            </div>
            
            <div class="pomodoro-stats" id="pomodoroStats" style="display: none;">
                <div class="stat-item">
                    <div class="stat-value" id="pomodoroCount">0</div>
                    <div class="stat-label">ğŸ… BugÃ¼n</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalWorkTime">0dk</div>
                    <div class="stat-label">â±ï¸ Ã‡alÄ±ÅŸma</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalBreakTime">0dk</div>
                    <div class="stat-label">â˜• Mola</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <button class="btn btn-primary" id="notificationBtn" onclick="requestNotificationPermission()">ğŸ”” Bildirimleri AÃ§</button>
            <button class="btn btn-secondary" onclick="testNotification()">ğŸ§ª Bildirimi Test Et</button>
            <button class="btn btn-secondary" id="pomodoroBtn" onclick="togglePomodoro()">ğŸ… Pomodoro BaÅŸlat</button>
            <button class="btn btn-secondary" onclick="showAddModal()">â• Yeni Etkinlik Ekle</button>
            
            <div class="calendar-section">
                <input type="file" id="icsFileInput" accept=".ics" style="display: none;" onchange="importFromOutlook(event)">
                <button class="calendar-btn" onclick="document.getElementById('icsFileInput').click()">
                    ğŸ“¥ Outlook'tan ToplantÄ± Ä°Ã§e Aktar
                </button>
                <div style="font-size: 0.85em; color: #6b7280; margin-top: 8px; padding: 0 12px;">
                    Outlook'ta toplantÄ±larÄ± seÃ§ â†’ Dosya olarak kaydet (.ics) â†’ Buradan yÃ¼kle
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="day-selector" id="daySelector"></div>
            <div class="schedule" id="schedule"></div>
        </div>
    </div>

    <!-- Ayarlar Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">âš™ï¸ Ayarlar</div>
            <div class="form-group">
                <label>Bildirim ZamanÄ±</label>
                <select id="notificationTime">
                    <option value="0">Tam zamanÄ±nda</option>
                    <option value="1" selected>1 dakika Ã¶nce</option>
                    <option value="5">5 dakika Ã¶nce</option>
                    <option value="10">10 dakika Ã¶nce</option>
                </select>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideSettings()" style="flex: 1;">Ä°ptal</button>
                <button class="btn btn-primary" onclick="saveSettings()" style="flex: 1;">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Etkinlik Ekleme/DÃ¼zenleme Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header" id="eventModalTitle">â• Yeni Etkinlik</div>
            <div class="form-group">
                <label>Etkinlik AdÄ±</label>
                <input type="text" id="eventName" placeholder="Ã–rn: Kahve MolasÄ±">
            </div>
            <div class="form-group">
                <label>BaÅŸlangÄ±Ã§ Saati</label>
                <input type="time" id="eventTime">
            </div>
            <div class="form-group">
                <label>SÃ¼re (dakika)</label>
                <input type="number" id="eventDuration" value="10" min="1">
            </div>
            <div class="form-group">
                <label>TÃ¼r</label>
                <select id="eventType">
                    <option value="break">Mola</option>
                    <option value="meeting">ToplantÄ±</option>
                </select>
            </div>
            <div class="form-group">
                <label>Hangi GÃ¼nler?</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="day1" value="1">
                        <label for="day1">Pzt</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="day2" value="2">
                        <label for="day2">Sal</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="day3" value="3">
                        <label for="day3">Ã‡ar</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="day4" value="4">
                        <label for="day4">Per</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="day5" value="5">
                        <label for="day5">Cum</label>
                    </div>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideEventModal()" style="flex: 1;">Ä°ptal</button>
                <button class="btn btn-danger" id="deleteEventBtn" onclick="confirmDelete()" style="display: none; flex: 1;">Sil</button>
                <button class="btn btn-primary" id="saveEventBtn" onclick="saveEvent()" style="flex: 1;">Kaydet</button>
            </div>
        </div>
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin: 0; font-size: 1.3em;">ğŸ“‹ GÃ¶rev Listesi</h2>
                <button class="btn-icon" onclick="clearCompleted()" title="TamamlananlarÄ± Temizle">ğŸ—‘ï¸</button>
            </div>
            
            <div class="checklist-progress" id="checklistProgress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 0 tamamlandÄ±</div>
            </div>
            
            <div class="checklist-items" id="checklistItems">
                <p style="text-align: center; color: #9ca3af; padding: 20px;">HenÃ¼z gÃ¶rev yok. YukarÄ±dan ekle!</p>
            </div>
            
            <div class="checklist-add">
                <input type="text" id="newTaskInput" placeholder="Yeni gÃ¶rev ekle..." onkeypress="if(event.key==='Enter') addTask()">
                <button class="btn-add" onclick="addTask()">â•</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
